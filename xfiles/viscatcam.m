function Stim =  viscatcam(pars,myscreen);% Stim =  viscatcam(pars,myscreen);%% code for viscatcam.x%% example: pars = [ 1001 0 0 ]%% 2000-07 MCif exist('zmac:Movies:CatCam','dir')	MovieDir = 'zmac:Movies:CatCam';elseif exist('zbigmac:Movies:','dir')	MovieDir = 'zbigmac:Movies:';else	Stim = []; 	returnend% ------ parse the pars (excuse the pun)ctr.x = pars(2);ctr.y = pars(3);%-------------------filename = fullfile(MovieDir,num2str(pars(1)));load(filename);% defines Stim.frames{1}, and maybe imagerate as well% imagerate = 100; save(filename,'Stim','imagerate');if exist('imagerate')~=1	imagerate = 25; % Hzend%-------------------% define the look-up tables for this stimuluslinClut = [ [128 128 128]; [255 255 255]; [  1   1   1]; round(linspace(1,255,253))'*[1 1 1] ];Stim.luts{1} = linClut;Stim = ltMakeOffScreenWindows(myscreen,Stim,1);%-------------------[ny, nx] = size(Stim.frames{1}{1});nimages = length(Stim.frames{1});duration = nimages/imagerate; % seconds% coords of center of stimulus with respect to the top left of the screenx = ctr.x + myscreen.Xmax/2;y = ctr.y + myscreen.Ymax/2;% coords of top left of stimulus with respect to the top left of the screenx = x - round(nx/2);y = y - round(ny/2);Stim.position(1,:) = [x,y,x+nx,y+ny];%------------------- define the sequences for the frames and the lutsnframes = ceil(duration*myscreen.FrameRate);frameseq = NaN*ones(1,nframes);imagetimes = linspace(0,duration,nimages+1); % in simageframes = ceil(imagetimes(1:end-1)*myscreen.FrameRate)+1;frameseq(imageframes) = [1:nimages];Stim.sequence.frames = frameseq;Stim.sequence.luts = ones(1,nframes);% define the number of times you want to see the movieStim.nperiods = 1;